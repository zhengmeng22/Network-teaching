<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
	<head>
		<meta charset="utf-8">
		<title>首页</title>
		<link rel="stylesheet" href="/layui-v2.4.5/layui/css/layui.css" />
		<link rel="stylesheet" href="/css/home.css" />
		<script src="/js/jquery-1.12.4.min.1.js"></script>
		<script src="/layui-v2.4.5/layui/layui.all.js"></script>
		<style>
			body .demo-class .layui-layer-title{background: #1E9FFF; color:#fff; border: none;}
			body .demo-class .layui-layer-btn a{background:#333;}
			body .demo-class .layui-layer-btn .layui-layer-btn1{background:#999;}
		</style>

	</head>
	<body>
		<ul class="layui-nav layui-bg-green" id="layerDemo" lay-filter="">
			<li class="layui-nav-item"><a href="#"><img src="/img/logo.png" /></a></li>
			<li class="layui-nav-item"><a href=""></a></li>
			<li class="layui-nav-item  layui-this"><a href="/home">首页</a></li>
			<li class="layui-nav-item"><a href="/curr">课程</a></li>
			<li class="layui-nav-item"><a href="">会员</a></li>
			<li class="layui-nav-item"><a href="javascript:;">路线</a></li>
			<li class="layui-nav-item"><a href="/qtTreasureBookinfos">面试宝典</a></li>
			<li class="layui-nav-item"><a href=""></a></li>
			<li class="layui-nav-item"><a href=""></a></li>
			<li class="layui-nav-item"><a href=""></a></li>
			<li class="layui-nav-item"><a href=""></a></li>
			<li class="layui-nav-item"><a href=""></a></li>
			<li class="layui-nav-item"><button data-method="notice" id="dl" class="layui-btn" style=""  th:if="${session.admin eq null}" >登录</button></li>
			<li class="layui-nav-item"><button data-method="notice" id="dl" class="layui-btn" style=""  th:if="${session.admin ne null}" th:text="${session.admin.UserLoginName}">登录</button></li>
			<li class="layui-nav-item"><button data-method="register" id="reg" class="layui-btn" style="" th:if="${session.admin eq null}">注册</button></li>
			<li class="layui-nav-item"><button data-method="register"  class="layui-btn" style="" th:if="${session.admin ne null}"><a th:href="@{'users/per?userLoginId='+${session.admin.userLoginId}}" >个人中心</a></button></li>

		</ul>
		<div id="box" style="display:none;" class="layui-anim layui-anim-up">
			<div class="layui-form-item">
				<label class="layui-form-label"><i class="layui-icon">&#xe66f;</i></label>
				<div class="layui-input-block">
					<input name="username" lay-verify="title" autocomplete="off" placeholder="请输入名称"  class="layui-input" id="lname" type="text">
				</div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label"><i class="layui-icon">&#xe673;</i></label>
				<div class="layui-input-block">
					<input name="password" placeholder="请输入密码" autocomplete="off" class="layui-input" type="password" id="lpwd">
					<a href="javascript:void(0);" id="wjma" style="margin-left: -330px;font-size: 2px;color: red;">忘记密码</a>
				</div>
			</div>
			<div>
				&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				<input type='button' id="log" value='登录' class="layui-btn layui-btn-radius layui-btn-normal" >


			</div>
		</div>

		<!-- 忘记密码 -->
		<div id="wj" style="display:none;">
			<form class="layui-form" action="">
				<div class="layui-form-item">
					<label class="layui-form-label"><i class="layui-icon">&#xe678;</i></label>
					<div class="layui-input-inline">
						<input id="cphone1" name="cust.phone" lay-verify="required|phone" autocomplete="off" placeholder="请验证手机号" class="layui-input" type="tel">
					</div>
				</div>
				<div class="layui-form-item">
					<label class="layui-form-label"><i class="layui-icon">&#xe673;</i></label>
					<div class="layui-input-inline">
						<input id="cpwd1" name="cust.cLPwd" lay-verify="pass" placeholder="请输入密码" autocomplete="off" class="layui-input" type="password">
					</div>
					<div class="layui-form-mid layui-word-aux">请填写6到12位密码</div>
				</div>
				<div class="layui-form-item">
					<label class="layui-form-label"><i class="layui-icon">&#xe673;</i></label>
					<div class="layui-input-inline">
						<input id="zpwd1" lay-verify="pass" placeholder="请再次输入密码" autocomplete="off" class="layui-input" type="password">
					</div>
					<div class="layui-form-mid layui-word-aux">注意俩次密码一致</div>
				</div>
				<input type='button' id="qrx" class="layui-btn layui-btn-lg layui-btn-normal" value='确认修改'  >
			</form>
		</div>
		<!--注册-->
		<div id="register" style="display:none;">
			<form class="layui-form" action="">
				<!-- 手机  -->
				<div class="layui-form-item">
					<label class="layui-form-label"><i class="layui-icon">&#xe678;</i></label>
					<div class="layui-input-inline">
						<input id="cphone" name="userTel" lay-verify="required|phone" autocomplete="off" placeholder="请输入手机号" class="layui-input" type="tel">
					</div>
				</div>
				<!--  邮箱 -->
				<div class="layui-form-item">
					<label class="layui-form-label"><i class="layui-icon">&#xe675;</i></label>
					<div class="layui-input-inline">
						<input id="cemail" name="userEmail " lay-verify="email" autocomplete="off" placeholder="请输入邮箱" class="layui-input" type="text">
					</div>
				</div>
				<!--     登录名 -->
				<div class="layui-form-item">
					<label class="layui-form-label"><i class="layui-icon">&#xe770;</i></label>
					<div class="layui-input-inline">
						<input id="cuname" name="userLoginName" lay-verify="identity" disabled  autocomplete="off" class="layui-input" type="text">
					</div>
				</div>
				<!--  密码 -->
				<div class="layui-form-item">
					<label class="layui-form-label"><i class="layui-icon">&#xe673;</i></label>
					<div class="layui-input-inline">
						<input id="cpwd" name="userLoginPwd" lay-verify="pass" placeholder="请输入密码" autocomplete="off" class="layui-input" type="password">
					</div>
					<div class="layui-form-mid layui-word-aux">请填写6到12位密码</div>
				</div>
				<div class="layui-form-item">
					<label class="layui-form-label"><i class="layui-icon">&#xe673;</i></label>
					<div class="layui-input-inline">
						<input id="zpwd" lay-verify="pass" placeholder="请再次输入密码" autocomplete="off" class="layui-input" type="password">
					</div>
					<div class="layui-form-mid layui-word-aux">注意俩次密码一致</div>
				</div>
				<div>
					<p></p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					&nbsp;&nbsp;&nbsp;&nbsp;<input type='button' id="regs" class="layui-btn layui-btn-lg layui-btn-normal" value='注册'  >
				</div>
			</form>
		</div>
		</nav>
		</div>
		<div class="clearfix"> </div>
		</div>

		<div id="count">
			<!-- 这里放入轮播图 -->
			<div id="count_wheel" align="center" style="height: 400px;">
				<div class="layui-carousel" id="test1" lay-filter="test1">
					<div carousel-item="">
						<div style="border: 0px solid black;">
							<img src="/img/1.jpg" width="1155px" height="380px" />
						</div>
						<div><img src="/img/2.jpg" width="1155px" height="380px" /></div>
						<div><img src="/img/3.jpg" width="1155px" height="380px" /></div>
						<div><img src="/img/4.jpg" width="1155px" height="380px" /></div>
						<div><img src="/img/5.png" width="1155px" height="380px" /></div>
					</div>
				</div>
			</div>
		</div>

		<div class="commodity">
			<div>
				<h1 align="left" style="float: left;"><i class="layui-icon layui-icon-fire" style="font-size: 30px; color: #1E9FFF;"></i>&nbsp;&nbsp;为你推荐</h1>
				<h5 align="left" style="float: right; color: #C9302C;">换一批</h5>
			</div>

			<hr />
			<div class="layui-row layui-col-space10 commodity_content">
				<div class="layui-col-md3 layui-col-space5" style="border: 0px solid red; text-align: center;margin: auto; border-radius: 15px;" th:each="curr,cu:${curr}" th:if="${cu.index<4}">
					<div>
						<a th:href="@{'culum?curriculumId='+${curr.curriculumId}}">
							<img th:src="'/img/'+${curr.curriculumImg}" style="width: 260px; height: 200px;" align="center" />
						</a>
						<div>
							<h2>
								<a href="#">
									<span th:text="${curr.curriculumName}"></span>
								</a>
							</h2>
						</div>
						<div>
							<div class="tf" style="float: left; color: #5E5E5E;"><span th:text="'浏览量'+${curr.curriculumBrowse}"></span> </div>
							<div class="hy" style="color: #00FF00;"><span th:if="${curr.curriculumMemberId eq 2}" th:text="免费"></span><span th:if="${curr.curriculumMemberId eq 1}" th:text="会员"></span></div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="commodity">
			<div>
				<h1 align="left" style="float: left;"><i class="layui-icon layui-icon-fire" style="font-size: 30px; color: #1E9FFF;"></i>&nbsp;&nbsp;最新课程</h1>
				<h5 align="left" style="float: right; color: #C9302C;">更多</h5>
			</div>

			<hr />
			<div class="layui-row layui-col-space10 commodity_content">
				<div class="layui-col-md3 layui-col-space5" style="border: 0px solid red; text-align: center;margin: auto; border-radius: 15px;" th:each="curr,cu:${curr}" th:if="${cu.index<4}">
					<div>
						<a href="#">
							<img th:src="'/img/'+${curr.curriculumImg}" style="width: 260px; height: 200px;" align="center" />
						</a>
						<div>
							<h2>
								<a href="#">
									<span th:text="${curr.curriculumName}"></span>
								</a>
							</h2>
						</div>
						<div>
							<div class="tf" style="float: left; color: #5E5E5E;"><span th:text="'浏览量'+${curr.curriculumBrowse}"></span> </div>
							<div class="hy" style="color: #00FF00;"><span th:if="${curr.curriculumMemberId eq 2}" th:text="免费"></span><span th:if="${curr.curriculumMemberId eq 1}" th:text="会员"></span></div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="commodity">
			<div>
				<h1 align="left" style="float: left;"><i class="layui-icon layui-icon-fire" style="font-size: 30px; color: #1E9FFF;"></i>&nbsp;&nbsp;微服务课程</h1>
				<h5 align="left" style="float: right; color: #C9302C;">更多</h5>
			</div>

			<hr />
			<div class="layui-row layui-col-space10 commodity_content">
				<div class="layui-col-md3 layui-col-space5" style="border: 0px solid red; text-align: center;margin: auto; border-radius: 15px;" th:each="curr,cu:${curr}" th:if="${cu.index<4}">
					<div>
						<a href="#">
							<img th:src="'/img/'+${curr.curriculumImg}" style="width: 260px; height: 200px;" align="center" />
						</a>
						<div>
							<h2>
								<a href="#">
									<span th:text="${curr.curriculumName}"></span>
								</a>
							</h2>
						</div>
						<div>
							<div class="tf" style="float: left; color: #5E5E5E;"><span th:text="'浏览量'+${curr.curriculumBrowse}"></span> </div>
							<div class="hy" style="color: #00FF00;"><span th:if="${curr.curriculumMemberId eq 2}" th:text="免费"></span><span th:if="${curr.curriculumMemberId eq 1}" th:text="会员"></span></div>
						</div>
					</div>
				</div>
			</div>
		</div>


		<div class="buttom">
			<div style="float: left;">
				<p>
					<h2><a>友情链接</a></h2>
				</p><br />
				<br />
				<p>
					<h3><a href="#">java视频</a> <a href="#">每日论坛</a> <a href="#">粉丝群</a></h3>
				</p>
				<hr />
				<h4><a>帮助中心</a>|<a>联系我们</a>|<a>关于我们</a>|&nbsp;&nbsp;客服：760736392&nbsp;&nbsp;&nbsp;Email:zgs_admin@163.com&nbsp;&nbsp;&nbsp;官方粉丝群：985599778</h4><br />
				<h4>Copyright ©2016-2019 AAA第一组版权所有 版本所有</h4>
			</div>
			<div style="float: right;">
				二维码

			</div>

		</div>




		<script>
			/* 轮播图 */
			layui.use(['carousel', 'form'], function() {
				var carousel = layui.carousel,
					form = layui.form;
				//常规轮播
				carousel.render({
					elem: '#test1',
					arrow: 'always',
					width: '60%',
					height: '380px'
				});
				var $ = layui.$,
					active = {
						set: function(othis) {
							var THIS = 'layui-bg-normal',
								key = othis.data('key'),
								options = {};

							othis.css('background-color', '#5FB878').siblings().removeAttr('style');
							options[key] = othis.data('value');
							ins3.reload(options);
						}
					};
				//监听开关
				form.on('switch(autoplay)', function() {
					ins3.reload({
						autoplay: this.checked
					});
				});
				$('.demoSet').on('keyup', function() {
					var value = this.value,
						options = {};
					if (!/^\d+$/.test(value)) return;
					options[this.name] = value;
					ins3.reload(options);
				});
			});

			// layui.use('layer', function() { //独立版的layer无需执行这一句
			// 			var $ = layui.jquery,
			// 				layer = layui.layer; //独立版的layer无需执行这一句
            //
			// 			var active = {
			// 				notice: function() {
			// 					//示范一个公告层
			// 					layer.open({
			// 						type: 1,
			// 						title: '会员登录', //不显示标题栏
			// 						closeBtn: false,
			// 						area: '300px;',
			// 						shade: 0.8,
			// 						id: 'LAY_layuipro', //设定一个id，防止重复弹出
			// 						btn: ['登录', '注册'],
			// 						btnAlign: 'c',
			// 						moveType: 1 ,//拖拽模式，0或者1
			// 						content: '<table><tr><td>账号：</td><td><input type="text"></td></tr></table>',
			// 						success: function(layero) {
			// 							var btn = layero.find('.layui-layer-btn');
			// 							btn.find('.layui-layer-btn0').attr({
            //
			// 							});
			// 						}
			// 					});
			// 					},
			// 				register:function(){
			// 					layer.open({
			// 						type: 1,
			// 						title: '会员注册', //不显示标题栏
			// 						closeBtn: false,
			// 						area: '300px;',
			// 						shade: 0.8,
			// 						id: 'LAY_layuipro', //设定一个id，防止重复弹出
			// 						btn: ['登录', '注册'],
			// 						btnAlign: 'c',
			// 						moveType: 1 ,//拖拽模式，0或者1
			// 						content: '',
			// 						success: function(layero) {
			// 							var btn = layero.find('.layui-layer-btn');
			// 							btn.find('.layui-layer-btn0').attr({
			// 								href: 'http://www.layui.com/',
			// 								target: '_blank'
			// 							});
			// 						}
			// 					});
            //
			// 				}
			// 				}
            //
			// 				$('#layerDemo .layui-btn').on('click', function() {
			// 					var othis = $(this),
			// 						method = othis.data('method');
			// 					active[method] ? active[method].call(this, othis) : '';
			// 				});
			// 			});
            $("#dl").click(function(){
                layui.use('layer', function(){
                    var layer = layui.layer;

                    layer.open({
                        type:1,
                        shade: [0.8, '#393D49'],
                        area: '500px',
                        skin: 'demo-class',
                        move: false,
                        title:'登陆',
                        anim: 6,
                        content: $('#box'),
						end:function(){
                            $("#box").hide();
                        }

                    });


                });
                $("#log").click(function(){

                    var name = $('input[name="username"]').val();
                    if(name==""){
                        layer.msg('<i class="layui-icon layui-icon-face-cry" style="font-size: 30px; color: red"></i>名字不能为空');
                        return false;
                    }

                    var name = $("#lname").val();
                    var pwd = $("#lpwd").val();
                    $.ajax({
                        url:"user/login",
                        type:"post",
                        data:{"userLoginName":name,"userLoginPwd":pwd},
                        dataType:"json",
                        success:function(data){
                            if(data==1){
                                $("#dl").css("display","none");
                                $("#uname").css("display","block");
                                /* $("#cancel").css("display","block"); */
                                //处理名字的加载
                                layer.msg('<i class="layui-icon layui-icon-face-smile" style="font-size: 30px; color: #00FFFF"></i>登录成功');
                                layer.closeAll('page');
                                // location.href="Q_show.jsp";
                                window.parent.location.replace(location.href);
                            }else{
                                $("#dl").css("display","block");
                                $("#uname").css("display","none");
                                $("#lpwd").val("");
                                layer.msg('<i class="layui-icon layui-icon-face-cry" style="font-size: 30px; color: red"></i>登录失败或账号未激活');
                            }
                        }
                    });

                });
            });

                $("#reg").click(function(){
                    layui.use('layer', function(){
                        var layer = layui.layer;
                        layer.open({
                            type:1,
                            shade: false,
                            area: '500px',
                            maxmin: true,
                            title:'注册',
                            content: $('#register'),
                            cancel: function(index, layero){
                                if(confirm('确定要关闭么')){ //只有当点击confirm框的确定时，该层才会关闭
                                    $("#cuname").val("");
                                    $("#cphone").val("");
                                    $("#cemail").val("");
                                    $("#cpwd").val("");
                                    layer.close(index);
                                }
                                return false;
                            },end:function(){
                                $("#register").hide();
                            }
                        });


                    });
                    var timestamp=new Date().getTime();
                    $("#cuname").val(timestamp);
                    $("#regs").click(function(){
                        var reg = /^1[3|4|5|7|8][0-9]{9}$/;
                        var phone = $('input[id="cphone"]').val();
                        if(phone==""){
                            layer.msg('<i class="layui-icon layui-icon-face-cry" style="font-size: 30px; color: red"></i>手机号不能为空');
                            return false;
                        }
                        if(reg.test(phone)){

                        }else{
                            layer.msg('<i class="layui-icon layui-icon-face-cry" style="font-size: 30px; color: red"></i>手机号格式不正确');
                            $('input[id="cphone"]').val("");
                            return false;
                        }
                        var em = /^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/;
                        var email = $("#cemail").val();
                        if(em.test(email)){

                        }else{
                            layer.msg('<i class="layui-icon layui-icon-face-cry" style="font-size: 30px; color: red"></i>邮箱格式错误');
                            return false;
                        }
                        if(email==""){
                            layer.msg('<i class="layui-icon layui-icon-face-cry" style="font-size: 30px; color: red"></i>邮箱不能为空');
                            return false;
                        }
                        var pwd = $("#cpwd").val();
                        var qpwd = $("#zpwd").val();
                        if(pwd!=qpwd){
                            layer.msg('<i class="layui-icon layui-icon-face-cry" style="font-size: 30px; color: red"></i>两次密码不一致');
                            return false;
                        }
                        //1 首先将需要的数据拼接成json对象
                        var json={"userTel":$("#cphone").val(),"userEmail":$("#cemail").val(),"userLoginName":$("#cuname").val(),"userLoginPwd":$("#cpwd").val()};
                        $.post("user/save",json,function(data){
                            if(data==1){
                                layer.msg('<i class="layui-icon layui-icon-face-smile" style="font-size: 30px; color: #00FFFF"></i>注册成功');
                                layer.closeAll('page');
                                window.parent.location.replace(location.href);

                            }else{

                                layer.msg('<i class="layui-icon layui-icon-face-cry" style="font-size: 30px; color: red"></i>注册失败');
                            }
                        },"json");

                    });
                });
            $("#wjma").click(function(){
                layui.use('layer', function(){
                    var layer = layui.layer;

                    layer.open({
                        type:1,
                        shade: false,
                        area: '500px',
                        maxmin: true,
                        title:'忘记密码',
                        content: $('#wj'),
                        anim: 2,
                        end:function(){
                            $("#wj").hide();
                        }

                    });

                    $("#qrx").click(function(){
                        var pwd = $("#cpwd").val();
                        var qpwd = $("#zpwd").val();
                        if(pwd!=qpwd){
                            layer.msg('<i class="layui-icon layui-icon-face-cry" style="font-size: 30px; color: red"></i>两次密码不一致');
                            return false;
                        }
                        var json = {"phone":$("#cphone").val(),"cpwd":$("#cpwd").val()};
                        $.post("login_upda",json,function(data){
                            if(data==1){
                                layer.msg('<i class="layui-icon layui-icon-face-smile" style="font-size: 30px; color: #00FFFF"></i>修改成功');
                                layer.closeAll('page');
                                // window.parent.location.replace(location.href);
                            }else{

                                layer.msg('<i class="layui-icon layui-icon-face-cry" style="font-size: 30px; color: red"></i>手机号不正确修改失败');
                            }
                        },"text");
                    })
                });
            });
		</script>

	</body>

</html>
